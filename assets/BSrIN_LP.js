import{P as j,ax as _,a8 as dt,a3 as ft,ay as Fe,C as w,h as se,j as Nt,r as Y,ap as Pe,aj as ee,a9 as Tt,f as Mt,a2 as Rt,m as Ke,O as kt}from"./B9JhfGSr.js";/**
  * vee-validate v4.13.1
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function x(e){return typeof e=="function"}function vt(e){return e==null}const ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ye(e){return Number(e)>=0}function Ut(e){const t=parseFloat(e);return isNaN(t)?e:t}function Bt(e){return typeof e=="object"&&e!==null}function Dt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function nt(e){if(!Bt(e)||Dt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t){return Object.keys(t).forEach(n=>{if(nt(t[n])&&nt(e[n])){e[n]||(e[n]={}),Ve(e[n],t[n]);return}e[n]=t[n]}),e}function be(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let a=1;a<t.length;a++){if(Ye(t[a])){n+=`[${t[a]}]`;continue}n+=`.${t[a]}`}return n}const zt={};function xt(e){return zt[e]}function rt(e,t,n){typeof n.value=="object"&&(n.value=E(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function E(e){if(typeof e!="object")return e;var t=0,n,a,u,l=Object.prototype.toString.call(e);if(l==="[object Object]"?u=Object.create(e.__proto__||null):l==="[object Array]"?u=Array(e.length):l==="[object Set]"?(u=new Set,e.forEach(function(h){u.add(E(h))})):l==="[object Map]"?(u=new Map,e.forEach(function(h,v){u.set(E(v),E(h))})):l==="[object Date]"?u=new Date(+e):l==="[object RegExp]"?u=new RegExp(e.source,e.flags):l==="[object DataView]"?u=new e.constructor(E(e.buffer)):l==="[object ArrayBuffer]"?u=e.slice(0):l.slice(-6)==="Array]"&&(u=new e.constructor(e)),u){for(a=Object.getOwnPropertySymbols(e);t<a.length;t++)rt(u,a[t],Object.getOwnPropertyDescriptor(e,a[t]));for(t=0,a=Object.getOwnPropertyNames(e);t<a.length;t++)Object.hasOwnProperty.call(u,n=a[t])&&u[n]===e[n]||rt(u,n,Object.getOwnPropertyDescriptor(e,n))}return u||e}const Xe=Symbol("vee-validate-form"),Lt=Symbol("vee-validate-field-instance"),it=Symbol("Default empty value"),$t=typeof window<"u";function qe(e){return x(e)&&!!e.__locatorRef}function X(e){return!!e&&x(e.parse)&&e.__type==="VVTypedSchema"}function Ie(e){return!!e&&x(e.validate)}function ht(e){return e==="checkbox"||e==="radio"}function Wt(e){return ce(e)||Array.isArray(e)}function qt(e){return Array.isArray(e)?e.length===0:ce(e)&&Object.keys(e).length===0}function Ne(e){return/^\[.+\]$/i.test(e)}function Gt(e){return mt(e)&&e.multiple}function mt(e){return e.tagName==="SELECT"}function Ht(e){return yt(e)&&e.target&&"submit"in e.target}function yt(e){return e?!!(typeof Event<"u"&&x(Event)&&e instanceof Event||e&&e.srcElement):!1}function B(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,a,u;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(a=n;a--!==0;)if(!B(e[a],t[a]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;for(a of e.entries())if(!B(a[1],t.get(a[0])))return!1;return!0}if(at(e)&&at(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(a=n;a--!==0;)if(e[a]!==t[a])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(u=Object.keys(e),n=u.length,a=n;a--!==0;){var l=u[a];if(!B(e[l],t[l]))return!1}return!0}return e!==e&&t!==t}function at(e){return $t?e instanceof File:!1}function Je(e){return Ne(e)?e.replace(/\[|\]/gi,""):e}function L(e,t,n){return e?Ne(t)?e[Je(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((u,l)=>Wt(u)&&l in u?u[l]:n,e):n}function ie(e,t,n){if(Ne(t)){e[Je(t)]=n;return}const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let u=e;for(let l=0;l<a.length;l++){if(l===a.length-1){u[a[l]]=n;return}(!(a[l]in u)||vt(u[a[l]]))&&(u[a[l]]=Ye(a[l+1])?[]:{}),u=u[a[l]]}}function $e(e,t){if(Array.isArray(e)&&Ye(t)){e.splice(Number(t),1);return}ce(e)&&delete e[t]}function lt(e,t){if(Ne(t)){delete e[Je(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let l=0;l<n.length;l++){if(l===n.length-1){$e(a,n[l]);break}if(!(n[l]in a)||vt(a[n[l]]))break;a=a[n[l]]}const u=n.map((l,h)=>L(e,n.slice(0,h).join(".")));for(let l=u.length-1;l>=0;l--)if(qt(u[l])){if(l===0){$e(e,n[0]);continue}$e(u[l-1],n[l-1])}}function W(e){return Object.keys(e)}function pt(e,t=void 0){const n=Ke();return(n==null?void 0:n.provides[e])||Rt(e,t)}function Kt(e,t,n){if(Array.isArray(e)){const a=[...e],u=a.findIndex(l=>B(l,t));return u>=0?a.splice(u,1):a.push(t),a}return B(e,t)?n:t}function ut(e,t=0){let n=null,a=[];return function(...u){return n&&clearTimeout(n),n=setTimeout(()=>{const l=e(...u);a.forEach(h=>h(l)),a=[]},t),new Promise(l=>a.push(l))}}function Yt(e,t){return ce(t)&&t.number?Ut(e):e}function Ge(e,t){let n;return async function(...u){const l=e(...u);n=l;const h=await l;return l!==n?h:(n=void 0,t(h,u))}}function He(e){return Array.isArray(e)?e:e?[e]:[]}function Ee(e,t){const n={};for(const a in e)t.includes(a)||(n[a]=e[a]);return n}function Xt(e){let t=null,n=[];return function(...a){const u=ee(()=>{if(t!==u)return;const l=e(...a);n.forEach(h=>h(l)),n=[],t=null});return t=u,new Promise(l=>n.push(l))}}function We(e){if(gt(e))return e._value}function gt(e){return"_value"in e}function Jt(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ce(e){if(!yt(e))return e;const t=e.target;if(ht(t.type)&&gt(t))return We(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(Gt(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(We);if(mt(t)){const n=Array.from(t.options).find(a=>a.selected);return n?We(n):t.value}return Jt(t)}function bt(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ce(e)&&e._$$isNormalized?e:ce(e)?Object.keys(e).reduce((n,a)=>{const u=Qt(e[a]);return e[a]!==!1&&(n[a]=ot(u)),n},t):typeof e!="string"?t:e.split("|").reduce((n,a)=>{const u=Zt(a);return u.name&&(n[u.name]=ot(u.params)),n},t):t}function Qt(e){return e===!0?[]:Array.isArray(e)||ce(e)?e:[e]}function ot(e){const t=n=>typeof n=="string"&&n[0]==="@"?en(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,a)=>(n[a]=t(e[a]),n),{})}const Zt=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function en(e){const t=n=>L(n,e)||n[e];return t.__locatorRef=e,t}function tn(e){return Array.isArray(e)?e.filter(qe):W(e).filter(t=>qe(e[t])).map(t=>e[t])}const nn={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let rn=Object.assign({},nn);const Oe=()=>rn;async function Ot(e,t,n={}){const a=n==null?void 0:n.bails,u={name:(n==null?void 0:n.name)||"{field}",rules:t,label:n==null?void 0:n.label,bails:a??!0,formData:(n==null?void 0:n.values)||{}},l=await an(u,e);return Object.assign(Object.assign({},l),{valid:!l.errors.length})}async function an(e,t){const n=e.rules;if(X(n)||Ie(n))return un(t,Object.assign(Object.assign({},e),{rules:n}));if(x(n)||Array.isArray(n)){const v={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},c=Array.isArray(n)?n:[n],s=c.length,S=[];for(let b=0;b<s;b++){const P=c[b],p=await P(t,v);if(!(typeof p!="string"&&!Array.isArray(p)&&p)){if(Array.isArray(p))S.push(...p);else{const J=typeof p=="string"?p:_t(v);S.push(J)}if(e.bails)return{errors:S}}}return{errors:S}}const a=Object.assign(Object.assign({},e),{rules:bt(n)}),u=[],l=Object.keys(a.rules),h=l.length;for(let v=0;v<h;v++){const c=l[v],s=await on(a,t,{name:c,params:a.rules[c]});if(s.error&&(u.push(s.error),e.bails))return{errors:u}}return{errors:u}}function ln(e){return!!e&&e.name==="ValidationError"}function Vt(e){return{__type:"VVTypedSchema",async parse(n,a){var u;try{return{output:await e.validate(n,{abortEarly:!1,context:(a==null?void 0:a.formData)||{}}),errors:[]}}catch(l){if(!ln(l))throw l;if(!(!((u=l.inner)===null||u===void 0)&&u.length)&&l.errors.length)return{errors:[{path:l.path,errors:l.errors}]};const h=l.inner.reduce((v,c)=>{const s=c.path||"";return v[s]||(v[s]={errors:[],path:s}),v[s].errors.push(...c.errors),v},{});return{errors:Object.values(h)}}}}}async function un(e,t){const a=await(X(t.rules)?t.rules:Vt(t.rules)).parse(e,{formData:t.formData}),u=[];for(const l of a.errors)l.errors.length&&u.push(...l.errors);return{value:a.value,errors:u}}async function on(e,t,n){const a=xt(n.name);if(!a)throw new Error(`No such validator '${n.name}' exists.`);const u=sn(n.params,e.formData),l={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:u})},h=await a(t,u,l);return typeof h=="string"?{error:h}:{error:h?void 0:_t(l)}}function _t(e){const t=Oe().generateMessage;return t?t(e):"Field is invalid"}function sn(e,t){const n=a=>qe(a)?a(t):a;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((a,u)=>(a[u]=n(e[u]),a),{})}async function cn(e,t){const a=await(X(e)?e:Vt(e)).parse(E(t)),u={},l={};for(const h of a.errors){const v=h.errors,c=(h.path||"").replace(/\["(\d+)"\]/g,(s,S)=>`[${S}]`);u[c]={valid:!v.length,errors:v},v.length&&(l[c]=v[0])}return{valid:!a.errors.length,results:u,errors:l,values:a.value,source:"schema"}}async function dn(e,t,n){const u=W(e).map(async s=>{var S,b,P;const p=(S=n==null?void 0:n.names)===null||S===void 0?void 0:S[s],T=await Ot(L(t,s),e[s],{name:(p==null?void 0:p.name)||s,label:p==null?void 0:p.label,values:t,bails:(P=(b=n==null?void 0:n.bailsMap)===null||b===void 0?void 0:b[s])!==null&&P!==void 0?P:!0});return Object.assign(Object.assign({},T),{path:s})});let l=!0;const h=await Promise.all(u),v={},c={};for(const s of h)v[s.path]={valid:s.valid,errors:s.errors},s.valid||(l=!1,c[s.path]=s.errors[0]);return{valid:l,results:v,errors:c,source:"schema"}}let st=0;function fn(e,t){const{value:n,initialValue:a,setInitialValue:u}=vn(e,t.modelValue,t.form);if(!t.form){let c=function(p){var T;"value"in p&&(n.value=p.value),"errors"in p&&S(p.errors),"touched"in p&&(P.touched=(T=p.touched)!==null&&T!==void 0?T:P.touched),"initialValue"in p&&u(p.initialValue)};const{errors:s,setErrors:S}=yn(),b=st>=Number.MAX_SAFE_INTEGER?0:++st,P=mn(n,a,s,t.schema);return{id:b,path:e,value:n,initialValue:a,meta:P,flags:{pendingUnmount:{[b]:!1},pendingReset:!1},errors:s,setState:c}}const l=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),h=j(()=>l.errors);function v(c){var s,S,b;"value"in c&&(n.value=c.value),"errors"in c&&((s=t.form)===null||s===void 0||s.setFieldError(w(e),c.errors)),"touched"in c&&((S=t.form)===null||S===void 0||S.setFieldTouched(w(e),(b=c.touched)!==null&&b!==void 0?b:!1)),"initialValue"in c&&u(c.initialValue)}return{id:Array.isArray(l.id)?l.id[l.id.length-1]:l.id,path:e,value:n,errors:h,meta:l,initialValue:a,flags:l.__flags,setState:v}}function vn(e,t,n){const a=Y(w(t));function u(){return n?L(n.initialValues.value,w(e),w(a)):w(a)}function l(s){if(!n){a.value=s;return}n.setFieldInitialValue(w(e),s,!0)}const h=j(u);if(!n)return{value:Y(u()),initialValue:h,setInitialValue:l};const v=hn(t,n,h,e);return n.stageInitialValue(w(e),v,!0),{value:j({get(){return L(n.values,w(e))},set(s){n.setFieldValue(w(e),s,!1)}}),initialValue:h,setInitialValue:l}}function hn(e,t,n,a){return Fe(e)?w(e):e!==void 0?e:L(t.values,w(a),w(n))}function mn(e,t,n,a){const u=j(()=>{var h,v,c;return(c=(v=(h=_(a))===null||h===void 0?void 0:h.describe)===null||v===void 0?void 0:v.call(h).required)!==null&&c!==void 0?c:!1}),l=Pe({touched:!1,pending:!1,valid:!0,required:u,validated:!!w(n).length,initialValue:j(()=>w(t)),dirty:j(()=>!B(w(e),w(t)))});return se(n,h=>{l.valid=!h.length},{immediate:!0,flush:"sync"}),l}function yn(){const e=Y([]);return{errors:e,setErrors:t=>{e.value=He(t)}}}function jn(e,t,n){return ht(void 0)?gn(e,t):St(e,t)}function St(e,t,n){const{initialValue:a,validateOnMount:u,bails:l,type:h,checkedValue:v,label:c,validateOnValueUpdate:s,uncheckedValue:S,controlled:b,keepValueOnUnmount:P,syncVModel:p,form:T}=pn(),J=b?pt(Xe):void 0,V=T||J,Q=j(()=>be(_(e))),H=j(()=>{if(_(V==null?void 0:V.schema))return;const O=w(t);return Ie(O)||X(O)||x(O)||Array.isArray(O)?O:bt(O)}),_e=!x(H.value)&&X(_(t)),{id:me,value:Z,initialValue:ae,meta:D,setState:de,errors:ye,flags:U}=fn(Q,{modelValue:a,form:V,bails:l,label:c,type:h,validate:H.value?M:void 0,schema:_e?t:void 0}),fe=j(()=>ye.value[0]);p&&bn({value:Z,prop:p,handleChange:Ae,shouldValidate:()=>s&&!U.pendingReset});const Te=(f,O=!1)=>{D.touched=!0,O&&te()};async function Se(f){var O,N;if(V!=null&&V.validateSchema){const{results:A}=await V.validateSchema(f);return(O=A[_(Q)])!==null&&O!==void 0?O:{valid:!0,errors:[]}}return H.value?Ot(Z.value,H.value,{name:_(Q),label:_(c),values:(N=V==null?void 0:V.values)!==null&&N!==void 0?N:{},bails:l}):{valid:!0,errors:[]}}const te=Ge(async()=>(D.pending=!0,D.validated=!0,Se("validated-only")),f=>(U.pendingUnmount[$.id]||(de({errors:f.errors}),D.pending=!1,D.valid=f.valid),f)),q=Ge(async()=>Se("silent"),f=>(D.valid=f.valid,f));function M(f){return(f==null?void 0:f.mode)==="silent"?q():te()}function Ae(f,O=!0){const N=Ce(f);ve(N,O)}dt(()=>{if(u)return te();(!V||!V.validateSchema)&&q()});function le(f){D.touched=f}function ue(f){var O;const N=f&&"value"in f?f.value:ae.value;de({value:E(N),initialValue:E(N),touched:(O=f==null?void 0:f.touched)!==null&&O!==void 0?O:!1,errors:(f==null?void 0:f.errors)||[]}),D.pending=!1,D.validated=!1,q()}const je=Ke();function ve(f,O=!0){Z.value=je&&p?Yt(f,je.props.modelModifiers):f,(O?te:q)()}function Qe(f){de({errors:Array.isArray(f)?f:[f]})}const pe=j({get(){return Z.value},set(f){ve(f,s)}}),$={id:me,name:Q,label:c,value:pe,meta:D,errors:ye,errorMessage:fe,type:h,checkedValue:v,uncheckedValue:S,bails:l,keepValueOnUnmount:P,resetField:ue,handleReset:()=>ue(),validate:M,handleChange:Ae,handleBlur:Te,setState:de,setTouched:le,setErrors:Qe,setValue:ve};if(ft(Lt,$),Fe(t)&&typeof w(t)!="function"&&se(t,(f,O)=>{B(f,O)||(D.validated?te():q())},{deep:!0}),!V)return $;const Me=j(()=>{const f=H.value;return!f||x(f)||Ie(f)||X(f)||Array.isArray(f)?{}:Object.keys(f).reduce((O,N)=>{const A=tn(f[N]).map(ne=>ne.__locatorRef).reduce((ne,K)=>{const re=L(V.values,K)||V.values[K];return re!==void 0&&(ne[K]=re),ne},{});return Object.assign(O,A),O},{})});return se(Me,(f,O)=>{if(!Object.keys(f).length)return;!B(f,O)&&(D.validated?te():q())}),Nt(()=>{var f;const O=(f=_($.keepValueOnUnmount))!==null&&f!==void 0?f:_(V.keepValuesOnUnmount),N=_(Q);if(O||!V||U.pendingUnmount[$.id]){V==null||V.removePathState(N,me);return}U.pendingUnmount[$.id]=!0;const A=V.getPathState(N);if(Array.isArray(A==null?void 0:A.id)&&(A!=null&&A.multiple)?A!=null&&A.id.includes($.id):(A==null?void 0:A.id)===$.id){if(A!=null&&A.multiple&&Array.isArray(A.value)){const K=A.value.findIndex(re=>B(re,_($.checkedValue)));if(K>-1){const re=[...A.value];re.splice(K,1),V.setFieldValue(N,re)}Array.isArray(A.id)&&A.id.splice(A.id.indexOf($.id),1)}else V.unsetPathValue(_(Q));V.removePathState(N,me)}}),$}function pn(e){return Object.assign(Object.assign({},{initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),{initialValue:void 0})}function gn(e,t,n){const a=pt(Xe),u=void 0,l=void 0;function h(v){const c=v.handleChange,s=j(()=>{const b=_(v.value),P=_(u);return Array.isArray(b)?b.findIndex(p=>B(p,P))>=0:B(P,b)});function S(b,P=!0){var p,T;if(s.value===((p=b==null?void 0:b.target)===null||p===void 0?void 0:p.checked)){P&&v.validate();return}const J=_(e),V=a==null?void 0:a.getPathState(J),Q=Ce(b);let H=(T=_(u))!==null&&T!==void 0?T:Q;a&&(V!=null&&V.multiple)&&V.type==="checkbox"&&(H=Kt(L(a.values,J)||[],H,void 0)),c(H,P)}return Object.assign(Object.assign({},v),{checked:s,checkedValue:u,uncheckedValue:l,handleChange:S})}return h(St(e,t))}function bn({prop:e,value:t,handleChange:n,shouldValidate:a}){const u=Ke();if(!u||!e)return;const l=typeof e=="string"?e:"modelValue",h=`update:${l}`;l in u.props&&(se(t,v=>{B(v,ct(u,l))||u.emit(h,v)}),se(()=>ct(u,l),v=>{if(v===it&&t.value===void 0)return;const c=v===it?void 0:v;B(c,t.value)||n(c,a())}))}function ct(e,t){if(e)return e.props[t]}let On=0;const we=["bails","fieldsCount","id","multiple","type","validate"];function At(e){const t=(e==null?void 0:e.initialValues)||{},n=Object.assign({},_(t)),a=w(e==null?void 0:e.validationSchema);return a&&X(a)&&x(a.cast)?E(a.cast(n)||{}):E(n)}function En(e){var t;const n=On++;let a=0;const u=Y(!1),l=Y(!1),h=Y(0),v=[],c=Pe(At(e)),s=Y([]),S=Y({}),b=Y({}),P=Xt(()=>{b.value=s.value.reduce((i,r)=>(i[be(_(r.path))]=r,i),{})});function p(i,r){const o=M(i);if(!o){typeof i=="string"&&(S.value[be(i)]=He(r));return}if(typeof i=="string"){const d=be(i);S.value[d]&&delete S.value[d]}o.errors=He(r),o.valid=!o.errors.length}function T(i){W(i).forEach(r=>{p(r,i[r])})}e!=null&&e.initialErrors&&T(e.initialErrors);const J=j(()=>{const i=s.value.reduce((r,o)=>(o.errors.length&&(r[o.path]=o.errors),r),{});return Object.assign(Object.assign({},S.value),i)}),V=j(()=>W(J.value).reduce((i,r)=>{const o=J.value[r];return o!=null&&o.length&&(i[r]=o[0]),i},{})),Q=j(()=>s.value.reduce((i,r)=>(i[r.path]={name:r.path||"",label:r.label||""},i),{})),H=j(()=>s.value.reduce((i,r)=>{var o;return i[r.path]=(o=r.bails)!==null&&o!==void 0?o:!0,i},{})),_e=Object.assign({},(e==null?void 0:e.initialErrors)||{}),me=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:Z,originalInitialValues:ae,setInitialValues:D}=_n(s,c,e),de=Vn(s,c,ae,V),ye=j(()=>s.value.reduce((i,r)=>{const o=L(c,r.path);return ie(i,r.path,o),i},{})),U=e==null?void 0:e.validationSchema;function fe(i,r){var o,d;const y=j(()=>L(Z.value,_(i))),g=b.value[_(i)],m=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(g&&m){g.multiple=!0;const G=a++;return Array.isArray(g.id)?g.id.push(G):g.id=[g.id,G],g.fieldsCount++,g.__flags.pendingUnmount[G]=!1,g}const I=j(()=>L(c,_(i))),C=_(i),R=le.findIndex(G=>G===C);R!==-1&&le.splice(R,1);const F=j(()=>{var G,ge,De,ze;const xe=_(U);if(X(xe))return(ge=(G=xe.describe)===null||G===void 0?void 0:G.call(xe,_(i)).required)!==null&&ge!==void 0?ge:!1;const Le=_(r==null?void 0:r.schema);return X(Le)&&(ze=(De=Le.describe)===null||De===void 0?void 0:De.call(Le).required)!==null&&ze!==void 0?ze:!1}),k=a++,z=Pe({id:k,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=_e[C])===null||o===void 0)&&o.length),required:F,initialValue:y,errors:kt([]),bails:(d=r==null?void 0:r.bails)!==null&&d!==void 0?d:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:I,multiple:!1,__flags:{pendingUnmount:{[k]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:j(()=>!B(w(I),w(y)))});return s.value.push(z),b.value[C]=z,P(),V.value[C]&&!_e[C]&&ee(()=>{oe(C,{mode:"silent"})}),Fe(i)&&se(i,G=>{P();const ge=E(I.value);b.value[G]=z,ee(()=>{ie(c,G,ge)})}),z}const Te=ut(tt,5),Se=ut(tt,5),te=Ge(async i=>await(i==="silent"?Te():Se()),(i,[r])=>{const o=W(f.errorBag.value),y=[...new Set([...W(i.results),...s.value.map(g=>g.path),...o])].sort().reduce((g,m)=>{var I;const C=m,R=M(C)||Ae(C),F=((I=i.results[C])===null||I===void 0?void 0:I.errors)||[],k=_(R==null?void 0:R.path)||C,z=Sn({errors:F,valid:!F.length},g.results[k]);return g.results[k]=z,z.valid||(g.errors[k]=z.errors[0]),R&&S.value[k]&&delete S.value[k],R?(R.valid=z.valid,r==="silent"||r==="validated-only"&&!R.validated||p(R,z.errors),g):(p(k,F),g)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(y.values=i.values,y.source=i.source),W(y.results).forEach(g=>{var m;const I=M(g);I&&r!=="silent"&&(r==="validated-only"&&!I.validated||p(I,(m=y.results[g])===null||m===void 0?void 0:m.errors))}),y});function q(i){s.value.forEach(i)}function M(i){const r=typeof i=="string"?be(i):i;return typeof r=="string"?b.value[r]:r}function Ae(i){return s.value.filter(o=>i.startsWith(o.path)).reduce((o,d)=>o?d.path.length>o.path.length?d:o:d,void 0)}let le=[],ue;function je(i){return le.push(i),ue||(ue=ee(()=>{[...le].sort().reverse().forEach(o=>{lt(c,o)}),le=[],ue=null})),ue}function ve(i){return function(o,d){return function(g){return g instanceof Event&&(g.preventDefault(),g.stopPropagation()),q(m=>m.touched=!0),u.value=!0,h.value++,he().then(m=>{const I=E(c);if(m.valid&&typeof o=="function"){const C=E(ye.value);let R=i?C:I;return m.values&&(R=m.source==="schema"?m.values:Object.assign({},R,m.values)),o(R,{evt:g,controlledValues:C,setErrors:T,setFieldError:p,setTouched:Re,setFieldTouched:K,setValues:A,setFieldValue:O,resetForm:ke,resetField:Ze})}!m.valid&&typeof d=="function"&&d({values:I,evt:g,errors:m.errors,results:m.results})}).then(m=>(u.value=!1,m),m=>{throw u.value=!1,m})}}}const pe=ve(!1);pe.withControlled=ve(!0);function $(i,r){const o=s.value.findIndex(y=>y.path===i&&(Array.isArray(y.id)?y.id.includes(r):y.id===r)),d=s.value[o];if(!(o===-1||!d)){if(ee(()=>{oe(i,{mode:"silent",warn:!1})}),d.multiple&&d.fieldsCount&&d.fieldsCount--,Array.isArray(d.id)){const y=d.id.indexOf(r);y>=0&&d.id.splice(y,1),delete d.__flags.pendingUnmount[r]}(!d.multiple||d.fieldsCount<=0)&&(s.value.splice(o,1),et(i),P(),delete b.value[i])}}function Me(i){W(b.value).forEach(r=>{r.startsWith(i)&&delete b.value[r]}),s.value=s.value.filter(r=>!r.path.startsWith(i)),ee(()=>{P()})}const f={formId:n,values:c,controlledValues:ye,errorBag:J,errors:V,schema:U,submitCount:h,meta:de,isSubmitting:u,isValidating:l,fieldArrays:v,keepValuesOnUnmount:me,validateSchema:w(U)?te:void 0,validate:he,setFieldError:p,validateField:oe,setFieldValue:O,setValues:A,setErrors:T,setFieldTouched:K,setTouched:Re,resetForm:ke,resetField:Ze,handleSubmit:pe,useFieldModel:Pt,defineInputBinds:It,defineComponentBinds:Ct,defineField:Be,stageInitialValue:wt,unsetInitialValue:et,setFieldInitialValue:Ue,createPathState:fe,getPathState:M,unsetPathValue:je,removePathState:$,initialValues:Z,getAllPathStates:()=>s.value,destroyPath:Me,isFieldTouched:re,isFieldDirty:jt,isFieldValid:Et};function O(i,r,o=!0){const d=E(r),y=typeof i=="string"?i:i.path;M(y)||fe(y),ie(c,y,d),o&&oe(y)}function N(i,r=!0){W(c).forEach(o=>{delete c[o]}),W(i).forEach(o=>{O(o,i[o],!1)}),r&&he()}function A(i,r=!0){Ve(c,i),v.forEach(o=>o&&o.reset()),r&&he()}function ne(i,r){const o=M(_(i))||fe(i);return j({get(){return o.value},set(d){var y;const g=_(i);O(g,d,(y=_(r))!==null&&y!==void 0?y:!1)}})}function K(i,r){const o=M(i);o&&(o.touched=r)}function re(i){const r=M(i);return r?r.touched:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function jt(i){const r=M(i);return r?r.dirty:s.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function Et(i){const r=M(i);return r?r.valid:s.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function Re(i){if(typeof i=="boolean"){q(r=>{r.touched=i});return}W(i).forEach(r=>{K(r,!!i[r])})}function Ze(i,r){var o;const d=r&&"value"in r?r.value:L(Z.value,i),y=M(i);y&&(y.__flags.pendingReset=!0),Ue(i,E(d),!0),O(i,d,!1),K(i,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),p(i,(r==null?void 0:r.errors)||[]),ee(()=>{y&&(y.__flags.pendingReset=!1)})}function ke(i,r){let o=E(i!=null&&i.values?i.values:ae.value);o=r!=null&&r.force?o:Ve(ae.value,o),o=X(U)&&x(U.cast)?U.cast(o):o,D(o,{force:r==null?void 0:r.force}),q(d=>{var y;d.__flags.pendingReset=!0,d.validated=!1,d.touched=((y=i==null?void 0:i.touched)===null||y===void 0?void 0:y[d.path])||!1,O(d.path,L(o,d.path),!1),p(d.path,void 0)}),r!=null&&r.force?N(o,!1):A(o,!1),T((i==null?void 0:i.errors)||{}),h.value=(i==null?void 0:i.submitCount)||0,ee(()=>{he({mode:"silent"}),q(d=>{d.__flags.pendingReset=!1})})}async function he(i){const r=(i==null?void 0:i.mode)||"force";if(r==="force"&&q(m=>m.validated=!0),f.validateSchema)return f.validateSchema(r);l.value=!0;const o=await Promise.all(s.value.map(m=>m.validate?m.validate(i).then(I=>({key:m.path,valid:I.valid,errors:I.errors,value:I.value})):Promise.resolve({key:m.path,valid:!0,errors:[],value:void 0})));l.value=!1;const d={},y={},g={};for(const m of o)d[m.key]={valid:m.valid,errors:m.errors},m.value&&ie(g,m.key,m.value),m.errors.length&&(y[m.key]=m.errors[0]);return{valid:o.every(m=>m.valid),results:d,errors:y,values:g,source:"fields"}}async function oe(i,r){var o;const d=M(i);if(d&&(r==null?void 0:r.mode)!=="silent"&&(d.validated=!0),U){const{results:y}=await te((r==null?void 0:r.mode)||"validated-only");return y[i]||{errors:[],valid:!0}}return d!=null&&d.validate?d.validate(r):(!d&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function et(i){lt(Z.value,i)}function wt(i,r,o=!1){Ue(i,r),ie(c,i,r),o&&!(e!=null&&e.initialValues)&&ie(ae.value,i,E(r))}function Ue(i,r,o=!1){ie(Z.value,i,E(r)),o&&ie(ae.value,i,E(r))}async function tt(){const i=w(U);if(!i)return{valid:!0,results:{},errors:{},source:"none"};l.value=!0;const r=Ie(i)||X(i)?await cn(i,c):await dn(i,c,{names:Q.value,bailsMap:H.value});return l.value=!1,r}const Ft=pe((i,{evt:r})=>{Ht(r)&&r.target.submit()});dt(()=>{if(e!=null&&e.initialErrors&&T(e.initialErrors),e!=null&&e.initialTouched&&Re(e.initialTouched),e!=null&&e.validateOnMount){he();return}f.validateSchema&&f.validateSchema("silent")}),Fe(U)&&se(U,()=>{var i;(i=f.validateSchema)===null||i===void 0||i.call(f,"validated-only")}),ft(Xe,f);function Be(i,r){const o=x(r)||r==null?void 0:r.label,d=M(_(i))||fe(i,{label:o}),y=()=>x(r)?r(Ee(d,we)):r||{};function g(){var F;d.touched=!0,((F=y().validateOnBlur)!==null&&F!==void 0?F:Oe().validateOnBlur)&&oe(d.path)}function m(){var F;((F=y().validateOnInput)!==null&&F!==void 0?F:Oe().validateOnInput)&&ee(()=>{oe(d.path)})}function I(){var F;((F=y().validateOnChange)!==null&&F!==void 0?F:Oe().validateOnChange)&&ee(()=>{oe(d.path)})}const C=j(()=>{const F={onChange:I,onInput:m,onBlur:g};return x(r)?Object.assign(Object.assign({},F),r(Ee(d,we)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},F),r.props(Ee(d,we))):F});return[ne(i,()=>{var F,k,z;return(z=(F=y().validateOnModelUpdate)!==null&&F!==void 0?F:(k=Oe())===null||k===void 0?void 0:k.validateOnModelUpdate)!==null&&z!==void 0?z:!0}),C]}function Pt(i){return Array.isArray(i)?i.map(r=>ne(r,!0)):ne(i)}function It(i,r){const[o,d]=Be(i,r);function y(){d.value.onBlur()}function g(I){const C=Ce(I);O(_(i),C,!1),d.value.onInput()}function m(I){const C=Ce(I);O(_(i),C,!1),d.value.onChange()}return j(()=>Object.assign(Object.assign({},d.value),{onBlur:y,onInput:g,onChange:m,value:o.value}))}function Ct(i,r){const[o,d]=Be(i,r),y=M(_(i));function g(m){o.value=m}return j(()=>{const m=x(r)?r(Ee(y,we)):r||{};return Object.assign({[m.model||"modelValue"]:o.value,[`onUpdate:${m.model||"modelValue"}`]:g},d.value)})}return Object.assign(Object.assign({},f),{values:Tt(c),handleReset:()=>ke(),submitForm:Ft})}function Vn(e,t,n,a){const u={touched:"some",pending:"some",valid:"every"},l=j(()=>!B(t,w(n)));function h(){const c=e.value;return W(u).reduce((s,S)=>{const b=u[S];return s[S]=c[b](P=>P[S]),s},{})}const v=Pe(h());return Mt(()=>{const c=h();v.touched=c.touched,v.valid=c.valid,v.pending=c.pending}),j(()=>Object.assign(Object.assign({initialValues:w(n)},v),{valid:v.valid&&!W(a.value).length,dirty:l.value}))}function _n(e,t,n){const a=At(n),u=Y(a),l=Y(E(a));function h(v,c){c!=null&&c.force?(u.value=E(v),l.value=E(v)):(u.value=Ve(E(u.value)||{},E(v)),l.value=Ve(E(l.value)||{},E(v))),c!=null&&c.updateFields&&e.value.forEach(s=>{if(s.touched)return;const b=L(u.value,s.path);ie(t,s.path,E(b))})}return{initialValues:u,originalInitialValues:l,setInitialValues:h}}function Sn(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}export{jn as a,En as u};
