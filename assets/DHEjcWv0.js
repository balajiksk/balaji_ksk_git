import{P as j,ax as V,a8 as dt,a3 as ft,ay as Fe,B as w,h as se,j as Nt,r as Y,ap as Pe,aj as Z,a9 as Tt,f as Mt,a2 as Rt,m as Ke,O as kt}from"./nrbqmjOL.js";/**
  * vee-validate v4.12.8
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function D(e){return typeof e=="function"}function vt(e){return e==null}const ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ye(e){return Number(e)>=0}function Ut(e){const t=parseFloat(e);return isNaN(t)?e:t}function Bt(e){return typeof e=="object"&&e!==null}function xt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function rt(e){if(!Bt(e)||xt(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ve(e,t){return Object.keys(t).forEach(r=>{if(rt(t[r])&&rt(e[r])){e[r]||(e[r]={}),Ve(e[r],t[r]);return}e[r]=t[r]}),e}function be(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let l=1;l<t.length;l++){if(Ye(t[l])){r+=`[${t[l]}]`;continue}r+=`.${t[l]}`}return r}const zt={};function Dt(e){return zt[e]}function nt(e,t,r){typeof r.value=="object"&&(r.value=P(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function P(e){if(typeof e!="object")return e;var t=0,r,l,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(d){a.add(P(d))})):u==="[object Map]"?(a=new Map,e.forEach(function(d,m){a.set(P(m),P(d))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(P(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(l=Object.getOwnPropertySymbols(e);t<l.length;t++)nt(a,l[t],Object.getOwnPropertyDescriptor(e,l[t]));for(t=0,l=Object.getOwnPropertyNames(e);t<l.length;t++)Object.hasOwnProperty.call(a,r=l[t])&&a[r]===e[r]||nt(a,r,Object.getOwnPropertyDescriptor(e,r))}return a||e}const Xe=Symbol("vee-validate-form"),Lt=Symbol("vee-validate-field-instance"),it=Symbol("Default empty value"),$t=typeof window<"u";function qe(e){return D(e)&&!!e.__locatorRef}function X(e){return!!e&&D(e.parse)&&e.__type==="VVTypedSchema"}function Ie(e){return!!e&&D(e.validate)}function ht(e){return e==="checkbox"||e==="radio"}function Wt(e){return ce(e)||Array.isArray(e)}function qt(e){return Array.isArray(e)?e.length===0:ce(e)&&Object.keys(e).length===0}function Ne(e){return/^\[.+\]$/i.test(e)}function Gt(e){return mt(e)&&e.multiple}function mt(e){return e.tagName==="SELECT"}function Ht(e){return yt(e)&&e.target&&"submit"in e.target}function yt(e){return e?!!(typeof Event<"u"&&D(Event)&&e instanceof Event||e&&e.srcElement):!1}function B(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,l,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(l=r;l--!==0;)if(!B(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!B(l[1],t.get(l[0])))return!1;return!0}if(lt(e)&&lt(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(l=r;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(a=Object.keys(e),r=a.length,l=r;l--!==0;){var u=a[l];if(!B(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function lt(e){return $t?e instanceof File:!1}function Je(e){return Ne(e)?e.replace(/\[|\]/gi,""):e}function L(e,t,r){return e?Ne(t)?e[Je(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>Wt(a)&&u in a?a[u]:r,e):r}function ie(e,t,r){if(Ne(t)){e[Je(t)]=r;return}const l=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<l.length;u++){if(u===l.length-1){a[l[u]]=r;return}(!(l[u]in a)||vt(a[l[u]]))&&(a[l[u]]=Ye(l[u+1])?[]:{}),a=a[l[u]]}}function $e(e,t){if(Array.isArray(e)&&Ye(t)){e.splice(Number(t),1);return}ce(e)&&delete e[t]}function at(e,t){if(Ne(t)){delete e[Je(t)];return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let u=0;u<r.length;u++){if(u===r.length-1){$e(l,r[u]);break}if(!(r[u]in l)||vt(l[r[u]]))break;l=l[r[u]]}const a=r.map((u,d)=>L(e,r.slice(0,d).join(".")));for(let u=a.length-1;u>=0;u--)if(qt(a[u])){if(u===0){$e(e,r[0]);continue}$e(a[u-1],r[u-1])}}function W(e){return Object.keys(e)}function pt(e,t=void 0){const r=Ke();return(r==null?void 0:r.provides[e])||Rt(e,t)}function Kt(e,t,r){if(Array.isArray(e)){const l=[...e],a=l.findIndex(u=>B(u,t));return a>=0?l.splice(a,1):l.push(t),l}return B(e,t)?r:t}function ut(e,t=0){let r=null,l=[];return function(...a){return r&&clearTimeout(r),r=setTimeout(()=>{const u=e(...a);l.forEach(d=>d(u)),l=[]},t),new Promise(u=>l.push(u))}}function Yt(e,t){return ce(t)&&t.number?Ut(e):e}function Ge(e,t){let r;return async function(...a){const u=e(...a);r=u;const d=await u;return u!==r?d:(r=void 0,t(d,a))}}function He(e){return Array.isArray(e)?e:e?[e]:[]}function je(e,t){const r={};for(const l in e)t.includes(l)||(r[l]=e[l]);return r}function Xt(e){let t=null,r=[];return function(...l){const a=Z(()=>{if(t!==a)return;const u=e(...l);r.forEach(d=>d(u)),r=[],t=null});return t=a,new Promise(u=>r.push(u))}}function We(e){if(gt(e))return e._value}function gt(e){return"_value"in e}function Jt(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ce(e){if(!yt(e))return e;const t=e.target;if(ht(t.type)&&gt(t))return We(t);if(t.type==="file"&&t.files){const r=Array.from(t.files);return t.multiple?r:r[0]}if(Gt(t))return Array.from(t.options).filter(r=>r.selected&&!r.disabled).map(We);if(mt(t)){const r=Array.from(t.options).find(l=>l.selected);return r?We(r):t.value}return Jt(t)}function bt(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ce(e)&&e._$$isNormalized?e:ce(e)?Object.keys(e).reduce((r,l)=>{const a=Qt(e[l]);return e[l]!==!1&&(r[l]=ot(a)),r},t):typeof e!="string"?t:e.split("|").reduce((r,l)=>{const a=Zt(l);return a.name&&(r[a.name]=ot(a.params)),r},t):t}function Qt(e){return e===!0?[]:Array.isArray(e)||ce(e)?e:[e]}function ot(e){const t=r=>typeof r=="string"&&r[0]==="@"?er(r.slice(1)):r;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((r,l)=>(r[l]=t(e[l]),r),{})}const Zt=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function er(e){const t=r=>L(r,e)||r[e];return t.__locatorRef=e,t}function tr(e){return Array.isArray(e)?e.filter(qe):W(e).filter(t=>qe(e[t])).map(t=>e[t])}const rr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let nr=Object.assign({},rr);const Oe=()=>nr;async function Ot(e,t,r={}){const l=r==null?void 0:r.bails,a={name:(r==null?void 0:r.name)||"{field}",rules:t,label:r==null?void 0:r.label,bails:l??!0,formData:(r==null?void 0:r.values)||{}},d=(await ir(a,e)).errors;return{errors:d,valid:!d.length}}async function ir(e,t){if(X(e.rules)||Ie(e.rules))return ar(t,e.rules);if(D(e.rules)||Array.isArray(e.rules)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},m=Array.isArray(e.rules)?e.rules:[e.rules],f=m.length,c=[];for(let S=0;S<f;S++){const g=m[S],A=await g(t,d);if(!(typeof A!="string"&&!Array.isArray(A)&&A)){if(Array.isArray(A))c.push(...A);else{const N=typeof A=="string"?A:_t(d);c.push(N)}if(e.bails)return{errors:c}}}return{errors:c}}const r=Object.assign(Object.assign({},e),{rules:bt(e.rules)}),l=[],a=Object.keys(r.rules),u=a.length;for(let d=0;d<u;d++){const m=a[d],f=await ur(r,t,{name:m,params:r.rules[m]});if(f.error&&(l.push(f.error),e.bails))return{errors:l}}return{errors:l}}function lr(e){return!!e&&e.name==="ValidationError"}function Vt(e){return{__type:"VVTypedSchema",async parse(r){var l;try{return{output:await e.validate(r,{abortEarly:!1}),errors:[]}}catch(a){if(!lr(a))throw a;if(!(!((l=a.inner)===null||l===void 0)&&l.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const u=a.inner.reduce((d,m)=>{const f=m.path||"";return d[f]||(d[f]={errors:[],path:f}),d[f].errors.push(...m.errors),d},{});return{errors:Object.values(u)}}}}}async function ar(e,t){const l=await(X(t)?t:Vt(t)).parse(e),a=[];for(const u of l.errors)u.errors.length&&a.push(...u.errors);return{errors:a}}async function ur(e,t,r){const l=Dt(r.name);if(!l)throw new Error(`No such validator '${r.name}' exists.`);const a=or(r.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:a})},d=await l(t,a,u);return typeof d=="string"?{error:d}:{error:d?void 0:_t(u)}}function _t(e){const t=Oe().generateMessage;return t?t(e):"Field is invalid"}function or(e,t){const r=l=>qe(l)?l(t):l;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((l,a)=>(l[a]=r(e[a]),l),{})}async function sr(e,t){const l=await(X(e)?e:Vt(e)).parse(P(t)),a={},u={};for(const d of l.errors){const m=d.errors,f=(d.path||"").replace(/\["(\d+)"\]/g,(c,S)=>`[${S}]`);a[f]={valid:!m.length,errors:m},m.length&&(u[f]=m[0])}return{valid:!l.errors.length,results:a,errors:u,values:l.value}}async function cr(e,t,r){const a=W(e).map(async c=>{var S,g,A;const b=(S=r==null?void 0:r.names)===null||S===void 0?void 0:S[c],N=await Ot(L(t,c),e[c],{name:(b==null?void 0:b.name)||c,label:b==null?void 0:b.label,values:t,bails:(A=(g=r==null?void 0:r.bailsMap)===null||g===void 0?void 0:g[c])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},N),{path:c})});let u=!0;const d=await Promise.all(a),m={},f={};for(const c of d)m[c.path]={valid:c.valid,errors:c.errors},c.valid||(u=!1,f[c.path]=c.errors[0]);return{valid:u,results:m,errors:f}}let st=0;function dr(e,t){const{value:r,initialValue:l,setInitialValue:a}=fr(e,t.modelValue,t.form);if(!t.form){let f=function(b){var N;"value"in b&&(r.value=b.value),"errors"in b&&S(b.errors),"touched"in b&&(A.touched=(N=b.touched)!==null&&N!==void 0?N:A.touched),"initialValue"in b&&a(b.initialValue)};const{errors:c,setErrors:S}=mr(),g=st>=Number.MAX_SAFE_INTEGER?0:++st,A=hr(r,l,c,t.schema);return{id:g,path:e,value:r,initialValue:l,meta:A,flags:{pendingUnmount:{[g]:!1},pendingReset:!1},errors:c,setState:f}}const u=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),d=j(()=>u.errors);function m(f){var c,S,g;"value"in f&&(r.value=f.value),"errors"in f&&((c=t.form)===null||c===void 0||c.setFieldError(w(e),f.errors)),"touched"in f&&((S=t.form)===null||S===void 0||S.setFieldTouched(w(e),(g=f.touched)!==null&&g!==void 0?g:!1)),"initialValue"in f&&a(f.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:r,errors:d,meta:u,initialValue:l,flags:u.__flags,setState:m}}function fr(e,t,r){const l=Y(w(t));function a(){return r?L(r.initialValues.value,w(e),w(l)):w(l)}function u(c){if(!r){l.value=c;return}r.setFieldInitialValue(w(e),c,!0)}const d=j(a);if(!r)return{value:Y(a()),initialValue:d,setInitialValue:u};const m=vr(t,r,d,e);return r.stageInitialValue(w(e),m,!0),{value:j({get(){return L(r.values,w(e))},set(c){r.setFieldValue(w(e),c,!1)}}),initialValue:d,setInitialValue:u}}function vr(e,t,r,l){return Fe(e)?w(e):e!==void 0?e:L(t.values,w(l),w(r))}function hr(e,t,r,l){const a=j(()=>{var d,m,f;return(f=(m=(d=V(l))===null||d===void 0?void 0:d.describe)===null||m===void 0?void 0:m.call(d).required)!==null&&f!==void 0?f:!1}),u=Pe({touched:!1,pending:!1,valid:!0,required:a,validated:!!w(r).length,initialValue:j(()=>w(t)),dirty:j(()=>!B(w(e),w(t)))});return se(r,d=>{u.valid=!d.length},{immediate:!0,flush:"sync"}),u}function mr(){const e=Y([]);return{errors:e,setErrors:t=>{e.value=He(t)}}}function Ar(e,t,r){return ht(void 0)?pr(e,t):St(e,t)}function St(e,t,r){const{initialValue:l,validateOnMount:a,bails:u,type:d,checkedValue:m,label:f,validateOnValueUpdate:c,uncheckedValue:S,controlled:g,keepValueOnUnmount:A,syncVModel:b,form:N}=yr(),ne=g?pt(Xe):void 0,O=N||ne,J=j(()=>be(V(e))),H=j(()=>{if(V(O==null?void 0:O.schema))return;const p=w(t);return Ie(p)||X(p)||D(p)||Array.isArray(p)?p:bt(p)}),_e=!D(H.value)&&X(V(t)),{id:me,value:Q,initialValue:le,meta:x,setState:de,errors:ye,flags:k}=dr(J,{modelValue:l,form:O,bails:u,label:f,type:d,validate:H.value?M:void 0,schema:_e?t:void 0}),fe=j(()=>ye.value[0]);b&&gr({value:Q,prop:b,handleChange:Ae,shouldValidate:()=>c&&!k.pendingReset});const Te=(v,p=!1)=>{x.touched=!0,p&&ee()};async function Se(v){var p,T;if(O!=null&&O.validateSchema){const{results:E}=await O.validateSchema(v);return(p=E[V(J)])!==null&&p!==void 0?p:{valid:!0,errors:[]}}return H.value?Ot(Q.value,H.value,{name:V(J),label:V(f),values:(T=O==null?void 0:O.values)!==null&&T!==void 0?T:{},bails:u}):{valid:!0,errors:[]}}const ee=Ge(async()=>(x.pending=!0,x.validated=!0,Se("validated-only")),v=>(k.pendingUnmount[$.id]||(de({errors:v.errors}),x.pending=!1,x.valid=v.valid),v)),q=Ge(async()=>Se("silent"),v=>(x.valid=v.valid,v));function M(v){return(v==null?void 0:v.mode)==="silent"?q():ee()}function Ae(v,p=!0){const T=Ce(v);ve(T,p)}dt(()=>{if(a)return ee();(!O||!O.validateSchema)&&q()});function ae(v){x.touched=v}function ue(v){var p;const T=v&&"value"in v?v.value:le.value;de({value:P(T),initialValue:P(T),touched:(p=v==null?void 0:v.touched)!==null&&p!==void 0?p:!1,errors:(v==null?void 0:v.errors)||[]}),x.pending=!1,x.validated=!1,q()}const Ee=Ke();function ve(v,p=!0){Q.value=Ee&&b?Yt(v,Ee.props.modelModifiers):v,(p?ee:q)()}function Qe(v){de({errors:Array.isArray(v)?v:[v]})}const pe=j({get(){return Q.value},set(v){ve(v,c)}}),$={id:me,name:J,label:f,value:pe,meta:x,errors:ye,errorMessage:fe,type:d,checkedValue:m,uncheckedValue:S,bails:u,keepValueOnUnmount:A,resetField:ue,handleReset:()=>ue(),validate:M,handleChange:Ae,handleBlur:Te,setState:de,setTouched:ae,setErrors:Qe,setValue:ve};if(ft(Lt,$),Fe(t)&&typeof w(t)!="function"&&se(t,(v,p)=>{B(v,p)||(x.validated?ee():q())},{deep:!0}),!O)return $;const Me=j(()=>{const v=H.value;return!v||D(v)||Ie(v)||X(v)||Array.isArray(v)?{}:Object.keys(v).reduce((p,T)=>{const E=tr(v[T]).map(te=>te.__locatorRef).reduce((te,K)=>{const re=L(O.values,K)||O.values[K];return re!==void 0&&(te[K]=re),te},{});return Object.assign(p,E),p},{})});return se(Me,(v,p)=>{if(!Object.keys(v).length)return;!B(v,p)&&(x.validated?ee():q())}),Nt(()=>{var v;const p=(v=V($.keepValueOnUnmount))!==null&&v!==void 0?v:V(O.keepValuesOnUnmount),T=V(J);if(p||!O||k.pendingUnmount[$.id]){O==null||O.removePathState(T,me);return}k.pendingUnmount[$.id]=!0;const E=O.getPathState(T);if(Array.isArray(E==null?void 0:E.id)&&(E!=null&&E.multiple)?E!=null&&E.id.includes($.id):(E==null?void 0:E.id)===$.id){if(E!=null&&E.multiple&&Array.isArray(E.value)){const K=E.value.findIndex(re=>B(re,V($.checkedValue)));if(K>-1){const re=[...E.value];re.splice(K,1),O.setFieldValue(T,re)}Array.isArray(E.id)&&E.id.splice(E.id.indexOf($.id),1)}else O.unsetPathValue(V(J));O.removePathState(T,me)}}),$}function yr(e){return Object.assign(Object.assign({},{initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),{initialValue:void 0})}function pr(e,t,r){const l=pt(Xe),a=void 0,u=void 0;function d(m){const f=m.handleChange,c=j(()=>{const g=V(m.value),A=V(a);return Array.isArray(g)?g.findIndex(b=>B(b,A))>=0:B(A,g)});function S(g,A=!0){var b,N;if(c.value===((b=g==null?void 0:g.target)===null||b===void 0?void 0:b.checked)){A&&m.validate();return}const ne=V(e),O=l==null?void 0:l.getPathState(ne),J=Ce(g);let H=(N=V(a))!==null&&N!==void 0?N:J;l&&(O!=null&&O.multiple)&&O.type==="checkbox"&&(H=Kt(L(l.values,ne)||[],H,void 0)),f(H,A)}return Object.assign(Object.assign({},m),{checked:c,checkedValue:a,uncheckedValue:u,handleChange:S})}return d(St(e,t))}function gr({prop:e,value:t,handleChange:r,shouldValidate:l}){const a=Ke();if(!a||!e)return;const u=typeof e=="string"?e:"modelValue",d=`update:${u}`;u in a.props&&(se(t,m=>{B(m,ct(a,u))||a.emit(d,m)}),se(()=>ct(a,u),m=>{if(m===it&&t.value===void 0)return;const f=m===it?void 0:m;B(f,t.value)||r(f,l())}))}function ct(e,t){if(e)return e.props[t]}let br=0;const we=["bails","fieldsCount","id","multiple","type","validate"];function At(e){const t=(e==null?void 0:e.initialValues)||{},r=Object.assign({},V(t)),l=w(e==null?void 0:e.validationSchema);return l&&X(l)&&D(l.cast)?P(l.cast(r)||{}):P(r)}function Er(e){var t;const r=br++;let l=0;const a=Y(!1),u=Y(!1),d=Y(0),m=[],f=Pe(At(e)),c=Y([]),S=Y({}),g=Y({}),A=Xt(()=>{g.value=c.value.reduce((i,n)=>(i[be(V(n.path))]=n,i),{})});function b(i,n){const o=M(i);if(!o){typeof i=="string"&&(S.value[be(i)]=He(n));return}if(typeof i=="string"){const s=be(i);S.value[s]&&delete S.value[s]}o.errors=He(n),o.valid=!o.errors.length}function N(i){W(i).forEach(n=>{b(n,i[n])})}e!=null&&e.initialErrors&&N(e.initialErrors);const ne=j(()=>{const i=c.value.reduce((n,o)=>(o.errors.length&&(n[o.path]=o.errors),n),{});return Object.assign(Object.assign({},S.value),i)}),O=j(()=>W(ne.value).reduce((i,n)=>{const o=ne.value[n];return o!=null&&o.length&&(i[n]=o[0]),i},{})),J=j(()=>c.value.reduce((i,n)=>(i[n.path]={name:n.path||"",label:n.label||""},i),{})),H=j(()=>c.value.reduce((i,n)=>{var o;return i[n.path]=(o=n.bails)!==null&&o!==void 0?o:!0,i},{})),_e=Object.assign({},(e==null?void 0:e.initialErrors)||{}),me=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:Q,originalInitialValues:le,setInitialValues:x}=Vr(c,f,e),de=Or(c,f,le,O),ye=j(()=>c.value.reduce((i,n)=>{const o=L(f,n.path);return ie(i,n.path,o),i},{})),k=e==null?void 0:e.validationSchema;function fe(i,n){var o,s;const y=j(()=>L(Q.value,V(i))),h=g.value[V(i)],_=(n==null?void 0:n.type)==="checkbox"||(n==null?void 0:n.type)==="radio";if(h&&_){h.multiple=!0;const G=l++;return Array.isArray(h.id)?h.id.push(G):h.id=[h.id,G],h.fieldsCount++,h.__flags.pendingUnmount[G]=!1,h}const I=j(()=>L(f,V(i))),C=V(i),U=ae.findIndex(G=>G===C);U!==-1&&ae.splice(U,1);const F=j(()=>{var G,ge,xe,ze;const De=V(k);if(X(De))return(ge=(G=De.describe)===null||G===void 0?void 0:G.call(De,V(i)).required)!==null&&ge!==void 0?ge:!1;const Le=V(n==null?void 0:n.schema);return X(Le)&&(ze=(xe=Le.describe)===null||xe===void 0?void 0:xe.call(Le).required)!==null&&ze!==void 0?ze:!1}),R=l++,z=Pe({id:R,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((o=_e[C])===null||o===void 0)&&o.length),required:F,initialValue:y,errors:kt([]),bails:(s=n==null?void 0:n.bails)!==null&&s!==void 0?s:!1,label:n==null?void 0:n.label,type:(n==null?void 0:n.type)||"default",value:I,multiple:!1,__flags:{pendingUnmount:{[R]:!1},pendingReset:!1},fieldsCount:1,validate:n==null?void 0:n.validate,dirty:j(()=>!B(w(I),w(y)))});return c.value.push(z),g.value[C]=z,A(),O.value[C]&&!_e[C]&&Z(()=>{oe(C,{mode:"silent"})}),Fe(i)&&se(i,G=>{A();const ge=P(I.value);g.value[G]=z,Z(()=>{ie(f,G,ge)})}),z}const Te=ut(tt,5),Se=ut(tt,5),ee=Ge(async i=>await(i==="silent"?Te():Se()),(i,[n])=>{const o=W(v.errorBag.value),y=[...new Set([...W(i.results),...c.value.map(h=>h.path),...o])].sort().reduce((h,_)=>{var I;const C=_,U=M(C)||Ae(C),F=((I=i.results[C])===null||I===void 0?void 0:I.errors)||[],R=V(U==null?void 0:U.path)||C,z=_r({errors:F,valid:!F.length},h.results[R]);return h.results[R]=z,z.valid||(h.errors[R]=z.errors[0]),U&&S.value[R]&&delete S.value[R],U?(U.valid=z.valid,n==="silent"||n==="validated-only"&&!U.validated||b(U,z.errors),h):(b(R,F),h)},{valid:i.valid,results:{},errors:{}});return i.values&&(y.values=i.values),W(y.results).forEach(h=>{var _;const I=M(h);I&&n!=="silent"&&(n==="validated-only"&&!I.validated||b(I,(_=y.results[h])===null||_===void 0?void 0:_.errors))}),y});function q(i){c.value.forEach(i)}function M(i){const n=typeof i=="string"?be(i):i;return typeof n=="string"?g.value[n]:n}function Ae(i){return c.value.filter(o=>i.startsWith(o.path)).reduce((o,s)=>o?s.path.length>o.path.length?s:o:s,void 0)}let ae=[],ue;function Ee(i){return ae.push(i),ue||(ue=Z(()=>{[...ae].sort().reverse().forEach(o=>{at(f,o)}),ae=[],ue=null})),ue}function ve(i){return function(o,s){return function(h){return h instanceof Event&&(h.preventDefault(),h.stopPropagation()),q(_=>_.touched=!0),a.value=!0,d.value++,he().then(_=>{const I=P(f);if(_.valid&&typeof o=="function"){const C=P(ye.value);let U=i?C:I;return _.values&&(U=_.values),o(U,{evt:h,controlledValues:C,setErrors:N,setFieldError:b,setTouched:Re,setFieldTouched:K,setValues:E,setFieldValue:p,resetForm:ke,resetField:Ze})}!_.valid&&typeof s=="function"&&s({values:I,evt:h,errors:_.errors,results:_.results})}).then(_=>(a.value=!1,_),_=>{throw a.value=!1,_})}}}const pe=ve(!1);pe.withControlled=ve(!0);function $(i,n){const o=c.value.findIndex(y=>y.path===i&&(Array.isArray(y.id)?y.id.includes(n):y.id===n)),s=c.value[o];if(!(o===-1||!s)){if(Z(()=>{oe(i,{mode:"silent",warn:!1})}),s.multiple&&s.fieldsCount&&s.fieldsCount--,Array.isArray(s.id)){const y=s.id.indexOf(n);y>=0&&s.id.splice(y,1),delete s.__flags.pendingUnmount[n]}(!s.multiple||s.fieldsCount<=0)&&(c.value.splice(o,1),et(i),A(),delete g.value[i])}}function Me(i){W(g.value).forEach(n=>{n.startsWith(i)&&delete g.value[n]}),c.value=c.value.filter(n=>!n.path.startsWith(i)),Z(()=>{A()})}const v={formId:r,values:f,controlledValues:ye,errorBag:ne,errors:O,schema:k,submitCount:d,meta:de,isSubmitting:a,isValidating:u,fieldArrays:m,keepValuesOnUnmount:me,validateSchema:w(k)?ee:void 0,validate:he,setFieldError:b,validateField:oe,setFieldValue:p,setValues:E,setErrors:N,setFieldTouched:K,setTouched:Re,resetForm:ke,resetField:Ze,handleSubmit:pe,useFieldModel:Pt,defineInputBinds:It,defineComponentBinds:Ct,defineField:Be,stageInitialValue:wt,unsetInitialValue:et,setFieldInitialValue:Ue,createPathState:fe,getPathState:M,unsetPathValue:Ee,removePathState:$,initialValues:Q,getAllPathStates:()=>c.value,destroyPath:Me,isFieldTouched:re,isFieldDirty:Et,isFieldValid:jt};function p(i,n,o=!0){const s=P(n),y=typeof i=="string"?i:i.path;M(y)||fe(y),ie(f,y,s),o&&oe(y)}function T(i,n=!0){W(f).forEach(o=>{delete f[o]}),W(i).forEach(o=>{p(o,i[o],!1)}),n&&he()}function E(i,n=!0){Ve(f,i),m.forEach(o=>o&&o.reset()),n&&he()}function te(i,n){const o=M(V(i))||fe(i);return j({get(){return o.value},set(s){var y;const h=V(i);p(h,s,(y=V(n))!==null&&y!==void 0?y:!1)}})}function K(i,n){const o=M(i);o&&(o.touched=n)}function re(i){const n=M(i);return n?n.touched:c.value.filter(o=>o.path.startsWith(i)).some(o=>o.touched)}function Et(i){const n=M(i);return n?n.dirty:c.value.filter(o=>o.path.startsWith(i)).some(o=>o.dirty)}function jt(i){const n=M(i);return n?n.valid:c.value.filter(o=>o.path.startsWith(i)).every(o=>o.valid)}function Re(i){if(typeof i=="boolean"){q(n=>{n.touched=i});return}W(i).forEach(n=>{K(n,!!i[n])})}function Ze(i,n){var o;const s=n&&"value"in n?n.value:L(Q.value,i),y=M(i);y&&(y.__flags.pendingReset=!0),Ue(i,P(s),!0),p(i,s,!1),K(i,(o=n==null?void 0:n.touched)!==null&&o!==void 0?o:!1),b(i,(n==null?void 0:n.errors)||[]),Z(()=>{y&&(y.__flags.pendingReset=!1)})}function ke(i,n){let o=P(i!=null&&i.values?i.values:le.value);o=n!=null&&n.force?o:Ve(le.value,o),o=X(k)&&D(k.cast)?k.cast(o):o,x(o),q(s=>{var y;s.__flags.pendingReset=!0,s.validated=!1,s.touched=((y=i==null?void 0:i.touched)===null||y===void 0?void 0:y[s.path])||!1,p(s.path,L(o,s.path),!1),b(s.path,void 0)}),n!=null&&n.force?T(o,!1):E(o,!1),N((i==null?void 0:i.errors)||{}),d.value=(i==null?void 0:i.submitCount)||0,Z(()=>{he({mode:"silent"}),q(s=>{s.__flags.pendingReset=!1})})}async function he(i){const n=(i==null?void 0:i.mode)||"force";if(n==="force"&&q(h=>h.validated=!0),v.validateSchema)return v.validateSchema(n);u.value=!0;const o=await Promise.all(c.value.map(h=>h.validate?h.validate(i).then(_=>({key:h.path,valid:_.valid,errors:_.errors})):Promise.resolve({key:h.path,valid:!0,errors:[]})));u.value=!1;const s={},y={};for(const h of o)s[h.key]={valid:h.valid,errors:h.errors},h.errors.length&&(y[h.key]=h.errors[0]);return{valid:o.every(h=>h.valid),results:s,errors:y}}async function oe(i,n){var o;const s=M(i);if(s&&(n==null?void 0:n.mode)!=="silent"&&(s.validated=!0),k){const{results:y}=await ee((n==null?void 0:n.mode)||"validated-only");return y[i]||{errors:[],valid:!0}}return s!=null&&s.validate?s.validate(n):(!s&&(o=n==null?void 0:n.warn),Promise.resolve({errors:[],valid:!0}))}function et(i){at(Q.value,i)}function wt(i,n,o=!1){Ue(i,n),ie(f,i,n),o&&!(e!=null&&e.initialValues)&&ie(le.value,i,P(n))}function Ue(i,n,o=!1){ie(Q.value,i,P(n)),o&&ie(le.value,i,P(n))}async function tt(){const i=w(k);if(!i)return{valid:!0,results:{},errors:{}};u.value=!0;const n=Ie(i)||X(i)?await sr(i,f):await cr(i,f,{names:J.value,bailsMap:H.value});return u.value=!1,n}const Ft=pe((i,{evt:n})=>{Ht(n)&&n.target.submit()});dt(()=>{if(e!=null&&e.initialErrors&&N(e.initialErrors),e!=null&&e.initialTouched&&Re(e.initialTouched),e!=null&&e.validateOnMount){he();return}v.validateSchema&&v.validateSchema("silent")}),Fe(k)&&se(k,()=>{var i;(i=v.validateSchema)===null||i===void 0||i.call(v,"validated-only")}),ft(Xe,v);function Be(i,n){const o=D(n)||n==null?void 0:n.label,s=M(V(i))||fe(i,{label:o}),y=()=>D(n)?n(je(s,we)):n||{};function h(){var F;s.touched=!0,((F=y().validateOnBlur)!==null&&F!==void 0?F:Oe().validateOnBlur)&&oe(s.path)}function _(){var F;((F=y().validateOnInput)!==null&&F!==void 0?F:Oe().validateOnInput)&&Z(()=>{oe(s.path)})}function I(){var F;((F=y().validateOnChange)!==null&&F!==void 0?F:Oe().validateOnChange)&&Z(()=>{oe(s.path)})}const C=j(()=>{const F={onChange:I,onInput:_,onBlur:h};return D(n)?Object.assign(Object.assign({},F),n(je(s,we)).props||{}):n!=null&&n.props?Object.assign(Object.assign({},F),n.props(je(s,we))):F});return[te(i,()=>{var F,R,z;return(z=(F=y().validateOnModelUpdate)!==null&&F!==void 0?F:(R=Oe())===null||R===void 0?void 0:R.validateOnModelUpdate)!==null&&z!==void 0?z:!0}),C]}function Pt(i){return Array.isArray(i)?i.map(n=>te(n,!0)):te(i)}function It(i,n){const[o,s]=Be(i,n);function y(){s.value.onBlur()}function h(I){const C=Ce(I);p(V(i),C,!1),s.value.onInput()}function _(I){const C=Ce(I);p(V(i),C,!1),s.value.onChange()}return j(()=>Object.assign(Object.assign({},s.value),{onBlur:y,onInput:h,onChange:_,value:o.value}))}function Ct(i,n){const[o,s]=Be(i,n),y=M(V(i));function h(_){o.value=_}return j(()=>{const _=D(n)?n(je(y,we)):n||{};return Object.assign({[_.model||"modelValue"]:o.value,[`onUpdate:${_.model||"modelValue"}`]:h},s.value)})}return Object.assign(Object.assign({},v),{values:Tt(f),handleReset:()=>ke(),submitForm:Ft})}function Or(e,t,r,l){const a={touched:"some",pending:"some",valid:"every"},u=j(()=>!B(t,w(r)));function d(){const f=e.value;return W(a).reduce((c,S)=>{const g=a[S];return c[S]=f[g](A=>A[S]),c},{})}const m=Pe(d());return Mt(()=>{const f=d();m.touched=f.touched,m.valid=f.valid,m.pending=f.pending}),j(()=>Object.assign(Object.assign({initialValues:w(r)},m),{valid:m.valid&&!W(l.value).length,dirty:u.value}))}function Vr(e,t,r){const l=At(r),a=Y(l),u=Y(P(l));function d(m,f=!1){a.value=Ve(P(a.value)||{},P(m)),u.value=Ve(P(u.value)||{},P(m)),f&&e.value.forEach(c=>{if(c.touched)return;const g=L(a.value,c.path);ie(t,c.path,P(g))})}return{initialValues:a,originalInitialValues:u,setInitialValues:d}}function _r(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}export{Ar as a,Er as u};
